%% lecture-index.sty
%%
%% --------------------------------------------------------------------------
%%
%% Autor: Florian Sihler, 8.10.2020
%%
%% Makeindex control

\ProvidesPackage{lecture-index}[2020/10/08 v1.0 Index control]

\RequirePackage{kvoptions}
\SetupKeyvalOptions{family=LECIDX, prefix=LECIDX@}
\DeclareStringOption[true]{automatic}[false]

\RequirePackage{imakeidx}

\def\indexname{Stichwortverzeichnis}
\edef\lecture@imkdx{\noexpand\makeindex[title=\indexname,columns=2,columnsep=0.75cm,noautomatic=\LECIDX@automatic]}
\lecture@imkdx

\indexsetup{level=\subsection*,noclearpage}

\DeclareRobustCommand{\kw}[1]{\textbf{#1}\index{#1}}
\DeclareRobustCommand{\sw}[2][Gruppenname]{#2\index{#1!#2}}
\DeclareRobustCommand{\sr}[3][Gruppenname]{#3\index{#1!#2!#3}}

\endinput