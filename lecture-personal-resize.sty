%% lecture-personal-resize.sty
%%
%% --------------------------------------------------------------------------
%%
%% Autor: Florian Sihler, 3.11.2020
%%
%% downsizebox as alternative to resizebox which will only reduce size
%% by width
\ProvidesPackage{lecture-personal-resize}[2020/11/12 v1.0 Downsize hack]

\newsavebox\lecture@personal@downsize@box
\newdimen\lecture@personal@downsize@box@height
% [height] | width | content
\newcommand\downsize[3][!]{%
  \savebox{\lecture@personal@downsize@box}{#3}%
  \ifdim\wd\lecture@personal@downsize@box>#2 %
    \resizebox*{#2}{#1}{\usebox\lecture@personal@downsize@box}%
  \else\usebox\lecture@personal@downsize@box\fi%
}

% [width] | height | content
\newcommand\downsizeHeight[3][!]{%
  \savebox{\lecture@personal@downsize@box}{#3}%
  \lecture@personal@downsize@box@height=\ht\lecture@personal@downsize@box%
  \advance\lecture@personal@downsize@box@height by \dp\lecture@personal@downsize@box%
  \ifdim\lecture@personal@downsize@box@height>#2 %
    \resizebox*{#1}{#2}{\usebox\lecture@personal@downsize@box}%
  \else\usebox\lecture@personal@downsize@box\fi%
}

% height | width | content
\newcommand\downsizeBoth[3]{%
  \savebox{\lecture@personal@downsize@box}{#3}%
  \lecture@personal@downsize@box@height=\ht\lecture@personal@downsize@box%
  \advance\lecture@personal@downsize@box@height by \dp\lecture@personal@downsize@box%
  \ifdim\wd\lecture@personal@downsize@box>#2 %
    \ifdim\lecture@personal@downsize@box@height>#1 %
      % both
      \resizebox*{#2}{#1}{\usebox\lecture@personal@downsize@box}%
    \else%
      % only width
      \resizebox{#2}{!}{\usebox\lecture@personal@downsize@box}%
    \fi
  \else\ifdim\lecture@personal@downsize@box@height>#1 %
    % only height
    \resizebox*{!}{#1}{\usebox\lecture@personal@downsize@box}%
  \else%
    % none
    \usebox\lecture@personal@downsize@box\fi%
  \fi
}


\endinput