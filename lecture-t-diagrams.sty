%% lecture-t-diagrams.sty
%%
%% --------------------------------------------------------------------------
%%
%% Autor: Florian Sihler, 25.10.2020
%%
%% tikz extension for t-diagrams
%%
\ProvidesPackage{lecture-t-diagrams}[2020/11/06 v1.0 t-diagrams]

% two hours wasted to do it with shapes. Lets do it simpler

\newlength\tblocksize
\setlength\tblocksize{0.9cm}

\newlength\tblockoffset
\setlength\tblockoffset{0.33em}
\tikzset{%
  tblock/.style={text width=\tblocksize,inner sep=0pt,align=center,minimum height=\tblocksize},%
  tborder/.style={semithick},%
  desc/.style={font=\large,outer sep=4pt,align=left},%
  every picture/.append style={line join=round,line cap=round}%
}

\def\tblockfont#1{\textit{#1}}
% #1 name
% #2 position
% #3 left
% #4 right
% #5 down
\newcommand*\tblock[5][]{%
  \draw[tborder] (#2) -| ++(3*\tblocksize,-\tblocksize) -| ++(-\tblocksize,-\tblocksize) -| ++(-\tblocksize,\tblocksize) -- ++(-\tblocksize,0) -- cycle;
  \path (#2)++(\tblocksize/2,-\tblocksize/2) node[tblock] (#1-left) {\tblockfont{#3}};
  \path (#2)++(\tblocksize/2+\tblocksize,-\tblocksize/2-1pt) node[tblock] (#1-mid) {\(\longrightarrow\)};
  \path (#2)++(\tblocksize/2+2*\tblocksize,-\tblocksize/2) node[tblock] (#1-right) {\tblockfont{#4}};
  \path (#2)++(\tblocksize/2+\tblocksize,-\tblocksize/2-\tblocksize) node[tblock] (#1-down) {\tblockfont{#5}};
}

\newenvironment{t-diagram}[1][]{\tikzpicture[yscale=0.9,#1]}{\endtikzpicture}

\endinput