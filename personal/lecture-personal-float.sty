% lecture-personal-float.sty
% Author: Florian Sihler, 3.11.2020
% Float modifications i use in my scripts
\ProvidesPackage{lecture-personal-float}[2020/11/03 v1.0 Personal float hacks]
\RequirePackage{wrapfig}
\def\fps@figure{tbp} \let\fps@table\fps@figure
\c@topnumber\tw@
\c@bottomnumber\@ne
\c@totalnumber\thr@@
\def\floatpagefraction{.56}% 0.2
\def\topfraction{.5}% 0.7
\g@addto@macro\end@float{%
\ifnum\@floatpenalty<0 \ifnum\@floatpenalty<-\@Mii
\else\ifhmode \if@ignore \penalty\@M \hskip\z@skip \fi\fi
\fi\fi}
\def\lecture@personal@pswf@r{r}%
\newcommand{parshapewrapfig}[3][r]{\par
    \def\@tmpa{#1}\ifx\@tmpa\lecture@personal@pswf@r\null\hfill\fi
    \smash{%
\raisebox{\dimexpr-\height+\baselineskip}{%
    #2}%
\par\vspace*{\dimexpr-\baselineskip-\parskip}
    }#3\relax
}
\endinput